const mineflayer = require('mineflayer');

const config = {
  username: "AfkBot",
  host: "LifeSteal029.aternos.me",
  port: 48688,
  version: "1.12.1"
};

let bot;

function createBot() {
  bot = mineflayer.createBot({
    host: config.host,
    port: config.port,
    username: config.username,
    version: config.version
  });

  bot.on('login', () => {
    console.log("Bot joined the server.");

    if (bot.supportFeature('sneak')) {
      bot.setControlState('sneak', true); // Anti-AFK
    }
  });

  bot.on('end', () => {
    console.log("Bot disconnected.");
  });

  bot.on('error', err => console.log("Error:", err.message));
}

// Start the bot
createBot();

// Auto Leave/Join Every 15 Minutes
setInterval(() => {
  if (bot) {
    console.log("Auto-rejoining...");
    bot.quit(); // Leave
    setTimeout(createBot, 5000); // Rejoin after 5 sec
  }
}, 15 * 60 * 1000); // 15 minutes
